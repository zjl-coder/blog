<TitleList></TitleList>

# git常用命令

### merge 与 rebase

### 删除commit

### git冲突
冲突可以说是<Te d>两个分支</Te>的冲突
###### 冲突的产生
**原因**： 对两个已经提交的分支的 相同文件相同位置 的 不同操作 进行了合并  

很多命令都可能出现冲突，但从根本上来讲，都是<Te d>merge</Te> 和 <Te d>patch</Te>（应用补丁）时产生冲突。  
###### merge 常见误区
::: danger git merge 是用时间先后决定merge结果的，后面会覆盖前面的?
答 ：git 是分布式的文件版本控制系统，在分布式环境中时间是不可靠的，git是靠<Te d>三路合并算法</Te>进行合并的。
:::
::: danger git merge 只要两行不相同就一定会报冲突，叫人工解决?  
答：git 尽管两行内容不一样，git 会进行取舍，当git无法进行取舍的时候才会进行人工解决冲突
:::

###### merge原理
git 合并文件是**以行为单位**进行一行一行进行合并的，但是有些时候并不是两行内容不一样git就会报冲突，因为smart git 会帮我们自动帮我们进行取舍，分析出那个结果才是我们所期望的，如果smart git 都无法进行取舍时候才会报冲突，这个时候才需要我们进行人工干预。

### 二路合并算法
**二路合并算法**：两个文件进行逐行对别，如果行内容不同就报冲突。
![An image](./images/git1.png)
- Mine 代表你本地修改 
- Theirs 代表其他人修改
- 假设对于**同一个文件**，出现你和其他人**一起修改**
- 此时如果git来进行合并，git就懵逼了，因为Git既不敢得罪你(Mine)，也不能得罪他们(Theirs) 
- git无法自动确认，合并只能自己搞了。开发中需要合并的情况太多了，每次都要人工合并太麻烦了

### 三路合并
三路合并就是先找出一个**基准**，然后以基准为Base 进行合并，如果2个文件相对基准(base)都发生了改变，那git 就报冲突，然后让你人工决断。否则，git将取相对于基准(base)变化的那个为最终结果。
![An image](./images/git2.png)
- Base 代表上一个版本，即公共祖先 
- Mine 代表你本地修改
- Theirs 代表其他人修改
- 当git进行合并的时候，git就知道是其他人修改了，本地没有更改
- git就会自动把最终结果变成如下：
![An image](./images/git3.png)  

**人工解决**：如果换成下面的这样，就需要人工解决了
![An image](./images/git4.png)
mine 和 Theirs 都修改了 `console.log('Hello World');`，所以需要人工确认

### 冲突的类型
###### 逻辑冲突
git自动处理（合并/应用补丁）成功，但是逻辑上是有问题的。  

比如另外一个人修改了文件名，但我还使用老的文件名，这种情况下自动处理是能成功的，但实际上是有问题的。
###### 树冲突
文件名修改造成的冲突，称为树冲突。  

比如，a分支把文件改名为A，b分支把同一个文件改名为B，那么将这两个commit合并时，会产生冲突。
###### 内容冲突
两个分支修改了同一个文件的同一块区域，git会报告内容冲突。我们常见的都是这种，后面的解决办法也主要针对这种冲突。

### 内容冲突的解决办法
###### 发现冲突
- 命令行模式
  - 命令行模式下进行代码合并时，一般来讲，出现冲突时都会有“CONFLICT”字样：
  ![An image](./images/git6.png)
- sourceTree
  - 当拉完代码出现冲突时，sourceTree会出现提示，可以在文件状态中查看是哪个文件出现了冲突，然后进入VScode中手动解决冲突。
  
###### 手动解决冲突
解决冲突：把Git合并失败的文件手动编辑为我们希望的内容，再提交。  
- 直接编辑冲突文件
  - 冲突产生后，文件系统中冲突了的文件里面的内容会显示为类似下面这样：
  ![An image](./images/git5.png)
  其中：冲突标记<<<<<<< （7个<）与=======之间的内容是之前的，=======与>>>>>>>之间的内容是新合进来的。  

  最简单的办法，就是直接编辑冲突了的文件，把冲突标记删掉，把想要保留的代码留下，把冲突解决。
- VScode提供的选项
  - 分别对应3种解决方案：保留当前的改变、保留引入的改变、保留全部
  ![An image](./images/git7.png)


